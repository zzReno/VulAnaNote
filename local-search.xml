<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Apache Tomcat拒绝服务漏洞(CVE-2021-42340)</title>
    <link href="/2022/02/26/2022/3%E6%9C%88%E5%89%8D/Apache%20Tomcat%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E6%BC%8F%E6%B4%9E(CVE-2021-42340)/"/>
    <url>/2022/02/26/2022/3%E6%9C%88%E5%89%8D/Apache%20Tomcat%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E6%BC%8F%E6%B4%9E(CVE-2021-42340)/</url>
    
    <content type="html"><![CDATA[<h2 id="一、漏洞信息"><a href="#一、漏洞信息" class="headerlink" title="一、漏洞信息"></a>一、漏洞信息</h2><h3 id="1-服务简介"><a href="#1-服务简介" class="headerlink" title="1. 服务简介"></a>1. 服务简介</h3><p><strong>Tomcat</strong>是由Apache软件基金会属下<a href="https://zh.wikipedia.org/wiki/Jakarta%E9%A1%B9%E7%9B%AE" title="Jakarta项目">Jakarta项目</a>开发的<a href="https://zh.wikipedia.org/wiki/Servlet" title="Servlet">Servlet</a>容器，按照<a href="https://zh.wikipedia.org/wiki/Sun_Microsystems" title="Sun Microsystems">Sun Microsystems</a>提供的技术规范，实现了对<a href="https://zh.wikipedia.org/wiki/Servlet" title="Servlet">Servlet</a>和<a href="https://zh.wikipedia.org/wiki/JavaServer_Page" title="JavaServer Page">JavaServer Page</a>（<a href="https://zh.wikipedia.org/wiki/JSP" title="JSP">JSP</a>）的支持，并提供了作为Web服务器的一些特有功能，如Tomcat管理和控制平台、安全局管理和Tomcat阀等。由于Tomcat本身也内含了<a href="https://zh.wikipedia.org/wiki/HTTP" title="HTTP">HTTP</a><a href="https://zh.wikipedia.org/wiki/%E6%9C%8D%E5%8A%A1%E5%99%A8" title="服务器">服务器</a>，因此也可以视作单独的<a href="https://zh.wikipedia.org/wiki/Web%E6%9C%8D%E5%8A%A1%E5%99%A8" title="Web服务器">Web服务器</a>。<br>Tomcat是由Apache软件基金会的会员和其他志愿者开发与维护的，并且是一个被置于<a href="https://zh.wikipedia.org/wiki/Apache%E5%8D%8F%E8%AE%AE" title="Apache协议">Apache协议</a>之下的<a href="https://zh.wikipedia.org/wiki/%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6" title="开源软件">开源软件</a>，因为Tomcat 技术先进、性能稳定，而且免费，因而深受Java 爱好者的喜爱并得到了部分软件开发商的认可，成为比较流行的Web 应用服务器。</p><h3 id="2-风险等级"><a href="#2-风险等级" class="headerlink" title="2. 风险等级"></a>2. 风险等级</h3><p>NVD评分为7.5，高危漏洞</p><p>360CERT对该漏洞的评定结果如下</p><table><thead><tr><th>评定方式</th><th>等级</th></tr></thead><tbody><tr><td>威胁等级</td><td>高危</td></tr><tr><td>影响面</td><td>广泛</td></tr><tr><td>攻击者价值</td><td>高</td></tr><tr><td>利用难度</td><td>低</td></tr><tr><td>360CERT评分</td><td>7.8</td></tr></tbody></table><h3 id="3-漏洞详情"><a href="#3-漏洞详情" class="headerlink" title="3. 漏洞详情"></a>3. 漏洞详情</h3><ul><li>漏洞编号：CVE-2021-42340</li><li>漏洞类型：拒绝服务、内存泄漏</li><li>漏洞描述：由于对历史 bug 63362 的修复引入了内存泄漏。当Tomcat WebSocket连接关闭时，用于收集 HTTP 升级连接指标的对象没有被释放，这就造成了内存泄漏，于是攻击者能够通过OutOfMemoryError造成拒绝服务。</li></ul><h2 id="二、影响版本"><a href="#二、影响版本" class="headerlink" title="二、影响版本"></a>二、影响版本</h2><table><thead><tr><th>组件</th><th>影响版本</th><th>安全版本</th></tr></thead><tbody><tr><td>Apache Tomcat</td><td>10.1.0-M1 - 10.1.0-M5</td><td>&gt;= 10.1.0-M6</td></tr><tr><td>Apache Tomcat</td><td>10.0.0-M10 - 10.0.11</td><td>&gt;= 10.0.12</td></tr><tr><td>Apache Tomcat</td><td>9.0.40 - 9.0.53</td><td>&gt;= 9.0.54</td></tr><tr><td>Apache Tomcat</td><td>8.5.60 - 8.5.71</td><td>&gt;= 8.5.72</td></tr></tbody></table><h2 id="三、漏洞原理"><a href="#三、漏洞原理" class="headerlink" title="三、漏洞原理"></a>三、漏洞原理</h2><p>漏洞主要原理是对已建立对http连接，没有做释放操作，导致大量http连接占用大量内存，从而导致内存超限，服务出现错误。<br>Apache官网的漏洞修复披露如图<br><img src="attachments/20220226112510.png"><br>github修复代码如下：<br><img src="attachments/20220226112607.png"><br>可以看到增加了三行内容，主要目的是添加置空操作，将connection置为null，以此释放内存。</p><h2 id="四、修复建议"><a href="#四、修复建议" class="headerlink" title="四、修复建议"></a>四、修复建议</h2><p>根据<code>影响版本</code>中的信息，排查并升级到<code>安全版本</code></p><h2 id="五、参考"><a href="#五、参考" class="headerlink" title="五、参考"></a>五、参考</h2><p><a href="https://cert.360.cn/warning/detail?id=ddc33e535bb277aa77422db13e0c654e">CVE-2021-42340: Apache Tomcat 拒绝服务漏洞通告 - 360CERT</a><br><a href="https://www.cve.org/CVERecord?id=CVE-2021-42340">https://www.cve.org/CVERecord?id=CVE-2021-42340</a><br><a href="https://tomcat.apache.org/security-10.html">https://tomcat.apache.org/security-10.html</a><br><a href="https://github.com/apache/tomcat/commit/d5a6660cba7f51589468937bf3bbad4db7810371#diff-118c313e8000707ef62583fd470ef10136c3e0fa7933532f6ae36d12c8be9512L100-R221">https://github.com/apache/tomcat/commit/d5a6660cba7f51589468937bf3bbad4db7810371#diff-118c313e8000707ef62583fd470ef10136c3e0fa7933532f6ae36d12c8be9512L100-R221</a></p>]]></content>
    
    
    <categories>
      
      <category>拒绝服务漏洞</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Apache Tomcat</tag>
      
      <tag>XF</tag>
      
      <tag>拒绝服务</tag>
      
      <tag>2022</tag>
      
      <tag>内存泄漏</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>testnote</title>
    <link href="/2022/02/25/test/testnote/"/>
    <url>/2022/02/25/test/testnote/</url>
    
    <content type="html"><![CDATA[<p>1</p>]]></content>
    
    
    <categories>
      
      <category>test</category>
      
      <category>first</category>
      
    </categories>
    
    
    <tags>
      
      <tag>test</tag>
      
      <tag>first</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/02/25/hello-world/"/>
    <url>/2022/02/25/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
